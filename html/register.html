<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../style/register.css">
    <title>个人注册</title>
</head>

<body>
    <header>
        <div class="logo w">
            <a href="../index.html" class="bg"></a>
            <div class="logo-title">欢迎注册</div>

            <div class="go-login">
                <a href="login.html" class="q-icon">请登录></a>
                <p>已有账号？</p>
            </div>
        </div>
    </header>

    <div id="main" class="w">
        <div class="head">
            <div class="l text box-1">
                <span class="step-index index-now">1</span>
                <!-- 跳转页面删除(index-now)给下一个span添加(index-now) -->
                <p class="p color-3b4">验证手机号</p>
                <!-- 跳转页面删除(color-3b4)给下一个p添加(color-3b4) -->
            </div>

            <div class="l box-2 tiao"></div>

            <div class="l text box-3">
                <span class="step-index">2</span>
                <p class="p">填写账号信息</p>
            </div>

            <div class="l box-4 tiao"></div>

            <div class="l text box-5">
                <span class="step-index">3</span>
                <p class="p">注册成功</p>
            </div>
            <!-- 我是(head)结尾 -->
        </div>
        <div class="main-inner">
            <div class="form">
                <form action="" id="register-form" method="POST">
                    <!-- (form-1)开头 -->
                    <div class="form-1">
                        <div class="form-2">
                            <!-- 功能:onmousemove(form-3) -->
                            <div class="form-3 upone">
                                <label class="select-country" id="select-country" country_id="0086">中国 0086<a
                                        href="javascript:void(0) " class="arrow"></a></label>
                                <div class="form-input">
                                    <input type="text" id="form-phone" maxlength="11" name="phone" class="field"
                                        placeholder="建议使用常用手机号" value=''>
                                    <i class="yes"></i>
                                    <i class="no"></i>
                                </div>
                            </div>
                            <div class="div-fcous">
                                <i></i>
                                <span class="div_cese">验证完成后，你可以使用该手机登录或找回密码</span>
                            </div>
                            <div class="tel">
                                <i></i>
                                <span class="tel-1">请输入手机号</span>
                            </div>
                            <div class="false">
                                <i></i>
                                <span class="false-span">格式错误</span>
                            </div>
                        </div>
                        <!-- (form-1)的结尾 -->
                    </div>
                    <!-- (form1-1)开头 -->
                    <div class="form1-1">
                        <!-- 功能:onmousemove(form1-2) -->
                        <div class="form1-2">点击按钮进行验证
                            <div class="img-r">
                                <a class="img-down"></a><!-- 下三角 -->
                                <a class="img-RT"></a><!-- 右上X -->
                                <div class="img-center">
                                    <div class="center-up">
                                        <div class="up-up">
                                            <div class="l up-left">完成拼图验证</div>
                                            <div class="r up-right">
                                                <span class="r">换一张</span>
                                                <div class="r"></div>
                                            </div>
                                        </div>
                                        <!-- 图 -->
                                        <div class="up-down">
                                            <div class="box-big">
                                                <img src="../assets/img/images/img1.png" alt="">
                                            </div>
                                            <div class="box-som">
                                                <img src="../assets/img/images/img1-1.png" alt="">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- 滑动条 -->
                                    <div class="center-down">
                                        <div class="center-center">
                                            <div class="down-left"></div>
                                            <div class="down-center">向右滑动完成拼图</div>
                                            <div class="down-right"></div>
                                        </div>

                                        <div class="D-L"><!-- 变可见,D-D滑动时 -->
                                            <div class="L-L"></div>
                                            <div class="L-C"></div><!-- 改变宽,D-D滑动时 -->
                                            <div class="L-R"></div>
                                        </div>

                                        <div class="D-D"></div>

                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- margin-bottom:20px -->
                    <div class="mar-btm"></div>
                    <!-- 下一步 -->
                    <div class="next">下一步</div>

                </form>
                <!-- 我是(form)结尾 -->
            </div>
            <!-- 个人企业注册 -->
            <div class="regis">
                <a href="#javascript" class="man">
                    <i class="man-i"></i>
                    企业用户注册
                </a>
                <a href="#javascript" class="out">
                    <i class="out-i"></i>
                    海外用户注册
                </a>
            </div>
            <!-- 我是(main-inner)结尾 -->
        </div>
        <!-- 我是(main)结尾 -->
    </div>
    <!-- 版本 -->
    <div class="w" id="footer">
        <div class="Jul">
            <a href="">关于我们</a>|
            <a href="">联系我们</a>|
            <a href="">人才招聘</a>|
            <a href="">商家入驻</a>|
            <a href="">广告服务</a>|
            <a href="">手机京东</a>|
            <a href="">友情链接</a>|
            <a href="">销售联盟</a>|
            <a href="">京东社区</a>|
            <a href="">京东公益</a>|
            <a href="">English Site</a>
        </div>
        <div class="gg">Copyright © 2004-2019 京东JD.com 版权所有</div>
    </div>

    <script src="../vendor/jquery-3.4.1.min.js"></script>
    <script>
        // 功能:onmousemove/onmouseout(input)
        var $form_3 = $('.form-3')
        var $form1_2 = $('.form1-2')
        var id
        var $val




        $form_3.on('mousemove', function () {
            $('.select-country').css({
                borderColor: 'rgb(153,153,153)'
            })
            $('.form-input').css({
                borderColor: 'rgb(153,153,153)'
            })
        })

        $form_3.on('mouseout', function () {
            $('.select-country').css({
                borderColor: 'rgb(221,221,221)'
            })
            $('.form-input').css({
                borderColor: 'rgb(221,221,221)'
            })
        })


        $form1_2.on('mousemove', function () {
            $form1_2.css({
                borderColor: 'rgb(153,153,153)'
            })

        })

        $form1_2.on('mouseout', function () {
            $form1_2.css({
                borderColor: 'rgb(221,221,221)'
            })
        })

        // 切换border
        $('.field').focus(function () {
            $('.div-fcous').css({
                display: 'block'
            })
            $('.field')[0].placeholder = ''
            $('.form-input')[0].classList.add('rgb102')
            $('.select-country')[0].classList.add('rgb221')

            $('.tel').css({
                display: 'none'
            })

            $('.false').css({
                display: 'none'
            })

        })






        // input焦点离开事件
        $('.field').blur(function () {
            $('.div-fcous').css({
                display: 'none'
            })
            $('.field')[0].placeholder = '建议使用常用手机号'
            $('.form-input')[0].classList.remove('rgb102')
            $('.select-country')[0].classList.remove('rgb221')


            $val = $('.field')[0].value
            if (!(/1(3|4|5|7|8)\d{9}/.test($val)) && $val !== '') {
                id = setTimeout(function () {
                    $('.false').css({
                        display: 'block'
                    })
                }, 150)

                $('.no').on('click', function () {
                    clearTimeout(id)

                    $('.false').css({
                        display: 'none'
                    })
                })
            }




        })

        $('.form1-2').on('click', function () {
            // console.log($('.field')[0].value)
            if ($('.field')[0].value === '') {
                $('.tel').css({
                    display: 'block'
                })


            }
        })


        $('.field').on('input', function () {

            if ($('.field')[0].value !== '') {
                $('.no').css({
                    display: 'block'
                })
            }

            if ($('.field')[0].value === '') {
                $('.no').css({
                    display: 'none'
                })
            }

            $('.no').on('click', function () {
                $('.field')[0].value = ''

                $('.no').css({
                    display: 'none'
                })

                $('.false').css({
                    display: 'none'
                })

            })
            $val = $('.field')[0].value
            if (!(/1(3|4|5|7|8)\d{9}/.test($val))) {
                $('.yes').css({
                    display: 'none'
                })
            }

            if ((/1(3|4|5|7|8)\d{9}/.test($val))) {
                $('.yes').css({
                    display: 'block'
                })

                $('.no').css({
                    display: 'none'
                })
            }
        })

        // 换一张
        
        function sum(index){
            $('.up-right').on('click', function () {
                if (index === 3) {
                    $('.box-som').css({
                        top: 60.6
                    })
                }

                if (index === 1) {
                    $('.box-som').css({
                        top: 70
                    })
                }

                if (index === 2) {
                    $('.box-som').css({
                        top: 44
                    })
                }

                $('.box-big img')[0].src = `../assets/img/images/img${index}.png`
                $('.box-som img')[0].src = `../assets/img/images/img1-${index}.png`   
                 sum(index)
            })

                // console.log(index);
                
                index++
                if(index > 3){
                    index = 1
                }
                $('.box-big img')[0].src = `../assets/img/images/img${index}.png`
                $('.box-som img')[0].src = `../assets/img/images/img1-${index}.png`

                if (index === 1) {
                    $('.box-som').css({
                        top: 60.6
                    })
                }

                if (index === 2) {
                    $('.box-som').css({
                        top: 70
                    })
                }

                if (index === 3) {
                    $('.box-som').css({
                        top: 44
                    })
                }
                
        }
sum(0)

        var h1 = document.querySelector('.box-som')
        var h3 = document.querySelector('.D-D')
        h3.onmousedown = function(evt){
			evt.preventDefault()
			var downX = evt.clientX 
			var downY = evt.clientY
			var downLeft = h3.offsetLeft
			var downTop = h3.offsetTop
            var h1Left = h1.offsetLeft
            var h1Top = h1.offsetTop


			window.onmousemove = function(evt){
				evt.preventDefault()
				var nowX = evt.clientX - downX
				var nowY = evt.clientY - downY 
                
                
                console.log(h3.offsetLeft);
                
                if(nowX < 0){

                    h1.style.left = 0 + 'px'
				    h3.style.left = 0 + 'px'
                    document.querySelector('.L-C').style.width = `${0}px`
                }else if(nowX > 300){
                    h1.style.left = 314 + 'px'
				    h3.style.left = 318 + 'px'
                    document.querySelector('.L-C').style.width = `${318}px`
                    
                    // console.log(h3.offsetLeft);
                    
                }else{
				    h1.style.left = nowX + downLeft + 'px'
				    h3.style.left = nowX + downLeft + 'px'
                    document.querySelector('.L-C').style.width = `${h3.offsetLeft}px`
                }
			}

			window.onmouseup = function(evt){
				evt.preventDefault()
				window.onmousemove = null 
				window.onmouseup = null

                sum(1)
                // if(nowX>= 150 && nowX<= 155){

                // }
                // h1.style.left = 0 + 'px'
				// h3.style.left = 0 + 'px'
                
			}
		}
    </script>
</body>

</html>